# 🔄 Auto FTP Sync - 实时全自动FTP同步工具

一款轻量、高效的FTP/SFTP文件自动同步工具，专为开发者设计。它可以实时监控本地项目文件夹的变化，并自动将变更（新增、修改、删除）同步到远程FTP服务器。

---

## 💡 心路历程

随着项目规模的扩大，我们编辑的代码文件可能四散在整个庞大项目结构的各个角落，每次在本地写完更新之后，要用逐一比对的方式，将变动的文件同步上传至服务器。鉴于此，我感觉我还挺需要有这么一个“全自动同步FTP”的工具的。

相对于普通的自动化FTP同步应用而言，我的一些更加个性化的需求点：

1. **无需实现100%双端同步，只需要在我编辑本地代码时，监控发生的改动即可**（如创建目录、修改文件）。
2. **实时全自动**，也就是在编写项目过程中，一旦某个文件保存了/某个动作执行了，该应用就会自动将变化同步至服务器，无需人工对比+手动拖拽。

因为我们将项目从云端拉至本地，可能会有一些与项目本身内容无关的文件变动（例如，你如果用VSCode打开项目，那么项目根目录下则会自动创建一个.vscode目录，然而此目录并非我们需要同步的内容），这一点我认为必须纳入我的需求范围。

所以我的这个应用的逻辑是：使用者点击“开始监控”后，应用才开始监控发生的改动。而并不会像其他一般的类似应用一样，每次初始化时都要做一次本地和服务器的全面对比——这太耗费时间了。

但是第一时间肯定想的是，有没有现成的、刚好能够满足我的**个性化需求**的类似工具？于是我上网搜索相关信息，汇总了一些，放在下面：

* Reddit上有人问过与我同样的问题。
* 我在YouTube上发现一个2年前的视频，发现需求和我的需求可以说是一模一样（链接我找不到了，不过这并不重要）。

  * 回答：WinSCP，GoodSync。后面的几个我就没再看了，我就去了解了一下WinSCP。
  * 具体了解之后，发现：其实它本质上和FileZilla这种普通的FTP软件并没什么两样，但是特殊就特殊在WinSCP支持**通过脚本实现全自动的文件更新**。
  * 那么问题来了，**既然说到底还是得借助脚本，我自己写的应用（相当于是UI化的脚本），不是更直接一些吗？**只需要一个面板，填写必要的FTP服务器参数，然后就可以直接进行（基于实时监控的）完全自动化的同步操作了。
* 出于不确定，我又调整了Github搜索的关键词，找到一个13年前（2013年）有人写的一个，是用C#写的（链接）。由于我不熟悉C#，所以并没有进一步了解了。

此时我考虑到，花时间搜寻能完全满足自己个性化需求的工具，似乎也是成本，既然如此，我不如即刻动手开始写一个自己需要的。

---

## ✨ 主要功能

*   **多服务器管理**：在一个界面中同时管理和监控多个不同本地目录到远程FTP服务器的同步任务。
*   **实时监控**：自动检测本地文件的创建、修改和删除操作。
*   **高效同步**：通过多线程架构，快速将文件变更上传或从远程服务器删除。
*   **安全连接**：支持 **FTPS (FTP over TLS)**，为需要加密连接的服务器提供安全保障。
*   **智能配置**：自动保存所有服务器配置，启动即用。
*   **配置导入/导出**：支持配置文件导出分享，团队协作更便捷。
*   **日志清晰**：实时显示所有同步任务的状态和操作日志，便于追踪。

---

## 🚀 快速开始

### 1. 下载

前往本项目的 `dist` 文件夹，下载 `AutoFTPSync.exe` 可执行文件。

### 2. 运行

双击 `AutoFTPSync.exe` 文件启动程序。

### 3. 配置服务器

新版程序围绕多服务器管理进行设计。您可以添加任意数量的同步任务：

1.  **添加服务器**
    *   启动程序后，点击左侧服务器列表下方的 **➕ 添加** 按钮。
    *   在弹出的对话框中，填写以下信息：
        *   **ID**: 程序会自动生成一个唯一ID，无需修改。
        *   **服务器地址**: 您的FTP服务器域名或IP地址。
        *   **端口**: 普通FTP为 `21`。如果服务器要求 **隐式FTPS**，请尝试 `990`。
        *   **用户名/密码**: 您的FTP登录凭据。
        *   **远程目录**: 您希望将文件同步到服务器上的哪个目录（例如 `/wwwroot/my-project`）。
        *   **本地目录**: 点击"浏览..."选择您电脑上需要被监控的本地项目文件夹。
        *   **使用 FTPS (安全连接)**: 如果您的服务器需要加密连接（即 **显式FTPS**），请勾选此项。

2.  **编辑与删除**
    *   在服务器列表中选中一个条目，即可使用 **✏️ 编辑** 或 **➖ 删除** 按钮对其进行管理。
    *   所有配置更改都会自动保存。

3.  **导出与导入配置（团队协作功能）**
    *   **📤 导出配置**: 点击此按钮可将当前所有服务器配置导出到 `data.json` 文件（或您指定的文件名），方便分享给团队成员。
    *   **📥 导入配置**: 点击此按钮可从 `data.json` 文件（或其他JSON配置文件）导入服务器配置。
        *   如果已有配置，程序会询问您是**合并**（添加新服务器）还是**替换**（清空现有配置后导入）。
        *   合并模式下，如果导入的配置中有重复的ID，程序会自动重新生成唯一ID。
    *   **使用场景**: 用户A配置好服务器后，导出 `data.json` 发送给用户B，用户B导入该文件即可快速获得相同配置。

### 4. 开始同步

1.  配置好一个或多个服务器后，点击 **▶️ 开始全部** 按钮。
2.  程序将为列表中的每一个有效配置启动一个独立的监控进程。
3.  您可以在服务器列表的“状态”列查看每个任务的运行情况（就绪、监控中、错误）。
4.  右侧的日志窗口会显示所有服务器的实时同步活动。
5.  如需停止，点击 **⏸️ 停止全部** 按钮即可。

---

## 📝 注意事项

*   程序会自动忽略 `.git`、`.vscode` 等常见的开发配置文件，避免不必要的同步。
*   请确保您的FTP账户有足够的权限在指定的远程目录中创建、写入和删除文件/文件夹。
*   **自动保存**: 所有服务器配置会自动保存到程序目录下的 `data.json` 文件中，下次启动时自动加载，无需重复配置。
*   配置文件 `data.json` 会自动创建在程序所在的目录，请勿手动删除或移动。

---

## 🔧 配置管理说明

### 个人使用模式
程序具有**自动保存**功能。每次添加、编辑或删除服务器配置时，更改会立即自动保存到 `data.json` 文件。下次启动程序时，您的所有配置会自动加载，无需重复填写。

### 团队协作模式
如需与团队成员共享配置，可使用**导出/导入**功能：

1. **配置分享者（用户A）**:
   - 配置好所有服务器信息
   - 点击 **📤 导出配置** 按钮
   - 选择保存位置（默认为 `data.json`）
   - 将导出的 `data.json` 文件发送给协作者

2. **配置接收者（用户B）**:
   - 收到 `data.json` 文件
   - 点击 **📥 导入配置** 按钮
   - 选择接收到的 `data.json` 文件
   - 选择"合并"或"替换"模式完成导入
   - 导入后的配置会自动保存，之后启动程序时自动加载
